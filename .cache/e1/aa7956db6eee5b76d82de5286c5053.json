{"id":"node_modules/livekit-client/dist/room/DeviceManager.js","dependencies":[{"name":"D:\\Livekit-Client\\node_modules\\livekit-client\\dist\\room\\DeviceManager.js.map","includedInParent":true,"mtime":1680887191542},{"name":"D:\\Livekit-Client\\package.json","includedInParent":true,"mtime":1680887270118},{"name":"D:\\Livekit-Client\\node_modules\\livekit-client\\package.json","includedInParent":true,"mtime":1680887189879}],"generated":{"js":"\"use strict\";\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst defaultId = 'default';\nclass DeviceManager {\n    static getInstance() {\n        if (this.instance === undefined) {\n            this.instance = new DeviceManager();\n        }\n        return this.instance;\n    }\n    getDevices(kind) {\n        return __awaiter(this, void 0, void 0, function* () {\n            let devices = yield navigator.mediaDevices.enumerateDevices();\n            devices = devices.filter((device) => device.kind === kind);\n            // Chrome returns 'default' devices, we would filter them out, but put the default\n            // device at first\n            // we would only do this if there are more than 1 device though\n            if (devices.length > 1 && devices[0].deviceId === defaultId) {\n                // find another device with matching group id, and move that to 0\n                const defaultDevice = devices[0];\n                for (let i = 1; i < devices.length; i += 1) {\n                    if (devices[i].groupId === defaultDevice.groupId) {\n                        const temp = devices[0];\n                        devices[0] = devices[i];\n                        devices[i] = temp;\n                        break;\n                    }\n                }\n                return devices.filter((device) => device !== defaultDevice);\n            }\n            return devices;\n        });\n    }\n    normalizeDeviceId(kind, deviceId, groupId) {\n        return __awaiter(this, void 0, void 0, function* () {\n            if (deviceId !== defaultId) {\n                return deviceId;\n            }\n            // resolve actual device id if it's 'default': Chrome returns it when no\n            // device has been chosen\n            const devices = yield this.getDevices(kind);\n            const device = devices.find((d) => d.groupId === groupId && d.deviceId !== defaultId);\n            return device === null || device === void 0 ? void 0 : device.deviceId;\n        });\n    }\n}\nexports.default = DeviceManager;\nDeviceManager.mediaDeviceKinds = [\n    'audioinput',\n    'audiooutput',\n    'videoinput',\n];\n"},"sourceMaps":{"js":{"version":3,"file":"DeviceManager.js","sourceRoot":"","sources":["../../src/room/DeviceManager.ts"],"names":[],"mappings":";;;;;;;;;;;AAAA,MAAM,SAAS,GAAG,SAAS,CAAC;AAE5B,MAAqB,aAAa;IAShC,MAAM,CAAC,WAAW;QAChB,IAAI,IAAI,CAAC,QAAQ,KAAK,SAAS,EAAE;YAC/B,IAAI,CAAC,QAAQ,GAAG,IAAI,aAAa,EAAE,CAAC;SACrC;QACD,OAAO,IAAI,CAAC,QAAQ,CAAC;IACvB,CAAC;IAEK,UAAU,CAAC,IAAqB;;YACpC,IAAI,OAAO,GAAG,MAAM,SAAS,CAAC,YAAY,CAAC,gBAAgB,EAAE,CAAC;YAC9D,OAAO,GAAG,OAAO,CAAC,MAAM,CAAC,CAAC,MAAM,EAAE,EAAE,CAAC,MAAM,CAAC,IAAI,KAAK,IAAI,CAAC,CAAC;YAC3D,kFAAkF;YAClF,kBAAkB;YAClB,+DAA+D;YAC/D,IAAI,OAAO,CAAC,MAAM,GAAG,CAAC,IAAI,OAAO,CAAC,CAAC,CAAC,CAAC,QAAQ,KAAK,SAAS,EAAE;gBAC3D,iEAAiE;gBACjE,MAAM,aAAa,GAAG,OAAO,CAAC,CAAC,CAAC,CAAC;gBACjC,KAAK,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,OAAO,CAAC,MAAM,EAAE,CAAC,IAAI,CAAC,EAAE;oBAC1C,IAAI,OAAO,CAAC,CAAC,CAAC,CAAC,OAAO,KAAK,aAAa,CAAC,OAAO,EAAE;wBAChD,MAAM,IAAI,GAAG,OAAO,CAAC,CAAC,CAAC,CAAC;wBACxB,OAAO,CAAC,CAAC,CAAC,GAAG,OAAO,CAAC,CAAC,CAAC,CAAC;wBACxB,OAAO,CAAC,CAAC,CAAC,GAAG,IAAI,CAAC;wBAClB,MAAM;qBACP;iBACF;gBACD,OAAO,OAAO,CAAC,MAAM,CAAC,CAAC,MAAM,EAAE,EAAE,CAAC,MAAM,KAAK,aAAa,CAAC,CAAC;aAC7D;YAED,OAAO,OAAO,CAAC;QACjB,CAAC;KAAA;IAEK,iBAAiB,CACrB,IAAqB,EAAE,QAAiB,EAAE,OAAgB;;YAE1D,IAAI,QAAQ,KAAK,SAAS,EAAE;gBAC1B,OAAO,QAAQ,CAAC;aACjB;YAED,wEAAwE;YACxE,yBAAyB;YACzB,MAAM,OAAO,GAAG,MAAM,IAAI,CAAC,UAAU,CAAC,IAAI,CAAC,CAAC;YAE5C,MAAM,MAAM,GAAG,OAAO,CAAC,IAAI,CAAC,CAAC,CAAC,EAAE,EAAE,CAAC,CAAC,CAAC,OAAO,KAAK,OAAO,IAAI,CAAC,CAAC,QAAQ,KAAK,SAAS,CAAC,CAAC;YAEtF,OAAO,MAAM,aAAN,MAAM,uBAAN,MAAM,CAAE,QAAQ,CAAC;QAC1B,CAAC;KAAA;;AArDH,gCAsDC;AAnDQ,8BAAgB,GAAsB;IAC3C,YAAY;IACZ,aAAa;IACb,YAAY;CACb,CAAC","sourcesContent":[null]}},"error":null,"hash":"0c520f24045d58b4c80a3a631425e000","cacheData":{"env":{}}}