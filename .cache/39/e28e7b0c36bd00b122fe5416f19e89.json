{"id":"node_modules/livekit-client/dist/room/track/LocalAudioTrack.js","dependencies":[{"name":"D:\\Livekit-Client\\node_modules\\livekit-client\\dist\\room\\track\\LocalAudioTrack.js.map","includedInParent":true,"mtime":1680887194546},{"name":"D:\\Livekit-Client\\package.json","includedInParent":true,"mtime":1680887270118},{"name":"D:\\Livekit-Client\\node_modules\\livekit-client\\package.json","includedInParent":true,"mtime":1680887189879},{"name":"../../logger","loc":{"line":15,"column":41,"index":938},"parent":"D:\\Livekit-Client\\node_modules\\livekit-client\\dist\\room\\track\\LocalAudioTrack.js","resolved":"D:\\Livekit-Client\\node_modules\\livekit-client\\dist\\logger.js"},{"name":"./LocalTrack","loc":{"line":16,"column":45,"index":1001},"parent":"D:\\Livekit-Client\\node_modules\\livekit-client\\dist\\room\\track\\LocalAudioTrack.js","resolved":"D:\\Livekit-Client\\node_modules\\livekit-client\\dist\\room\\track\\LocalTrack.js"},{"name":"./Track","loc":{"line":17,"column":24,"index":1043},"parent":"D:\\Livekit-Client\\node_modules\\livekit-client\\dist\\room\\track\\LocalAudioTrack.js","resolved":"D:\\Livekit-Client\\node_modules\\livekit-client\\dist\\room\\track\\Track.js"}],"generated":{"js":"\"use strict\";\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst logger_1 = __importDefault(require(\"../../logger\"));\nconst LocalTrack_1 = __importDefault(require(\"./LocalTrack\"));\nconst Track_1 = require(\"./Track\");\nclass LocalAudioTrack extends LocalTrack_1.default {\n    constructor(mediaTrack, name, constraints) {\n        super(mediaTrack, Track_1.Track.Kind.Audio, name, constraints);\n        /** @internal */\n        this.stopOnMute = false;\n    }\n    setDeviceId(deviceId) {\n        return __awaiter(this, void 0, void 0, function* () {\n            if (this.constraints.deviceId === deviceId) {\n                return;\n            }\n            this.constraints.deviceId = deviceId;\n            if (!this.isMuted) {\n                yield this.restartTrack();\n            }\n        });\n    }\n    mute() {\n        const _super = Object.create(null, {\n            mute: { get: () => super.mute }\n        });\n        return __awaiter(this, void 0, void 0, function* () {\n            // disabled special handling as it will cause BT headsets to switch communication modes\n            if (this.source === Track_1.Track.Source.Microphone && this.stopOnMute) {\n                logger_1.default.debug('stopping mic track');\n                // also stop the track, so that microphone indicator is turned off\n                this.mediaStreamTrack.stop();\n            }\n            yield _super.mute.call(this);\n            return this;\n        });\n    }\n    unmute() {\n        const _super = Object.create(null, {\n            unmute: { get: () => super.unmute }\n        });\n        return __awaiter(this, void 0, void 0, function* () {\n            if (this.source === Track_1.Track.Source.Microphone && this.stopOnMute) {\n                logger_1.default.debug('reacquiring mic track');\n                yield this.restartTrack();\n            }\n            yield _super.unmute.call(this);\n            return this;\n        });\n    }\n    restartTrack(options) {\n        return __awaiter(this, void 0, void 0, function* () {\n            let constraints;\n            if (options) {\n                const streamConstraints = LocalTrack_1.default.constraintsForOptions({ audio: options });\n                if (typeof streamConstraints.audio !== 'boolean') {\n                    constraints = streamConstraints.audio;\n                }\n            }\n            yield this.restart(constraints);\n        });\n    }\n}\nexports.default = LocalAudioTrack;\n"},"sourceMaps":{"js":{"version":3,"file":"LocalAudioTrack.js","sourceRoot":"","sources":["../../../src/room/track/LocalAudioTrack.ts"],"names":[],"mappings":";;;;;;;;;;;;;;AAAA,0DAA+B;AAC/B,8DAAsC;AAEtC,mCAAgC;AAEhC,MAAqB,eAAgB,SAAQ,oBAAU;IAMrD,YACE,UAA4B,EAC5B,IAAa,EACb,WAAmC;QAEnC,KAAK,CAAC,UAAU,EAAE,aAAK,CAAC,IAAI,CAAC,KAAK,EAAE,IAAI,EAAE,WAAW,CAAC,CAAC;QARzD,gBAAgB;QAChB,eAAU,GAAY,KAAK,CAAC;IAQ5B,CAAC;IAEK,WAAW,CAAC,QAAgB;;YAChC,IAAI,IAAI,CAAC,WAAW,CAAC,QAAQ,KAAK,QAAQ,EAAE;gBAC1C,OAAO;aACR;YACD,IAAI,CAAC,WAAW,CAAC,QAAQ,GAAG,QAAQ,CAAC;YACrC,IAAI,CAAC,IAAI,CAAC,OAAO,EAAE;gBACjB,MAAM,IAAI,CAAC,YAAY,EAAE,CAAC;aAC3B;QACH,CAAC;KAAA;IAEK,IAAI;;;;;YACR,uFAAuF;YACvF,IAAI,IAAI,CAAC,MAAM,KAAK,aAAK,CAAC,MAAM,CAAC,UAAU,IAAI,IAAI,CAAC,UAAU,EAAE;gBAC9D,gBAAG,CAAC,KAAK,CAAC,oBAAoB,CAAC,CAAC;gBAChC,kEAAkE;gBAClE,IAAI,CAAC,gBAAgB,CAAC,IAAI,EAAE,CAAC;aAC9B;YACD,MAAM,OAAM,IAAI,WAAE,CAAC;YACnB,OAAO,IAAI,CAAC;QACd,CAAC;KAAA;IAEK,MAAM;;;;;YACV,IAAI,IAAI,CAAC,MAAM,KAAK,aAAK,CAAC,MAAM,CAAC,UAAU,IAAI,IAAI,CAAC,UAAU,EAAE;gBAC9D,gBAAG,CAAC,KAAK,CAAC,uBAAuB,CAAC,CAAC;gBACnC,MAAM,IAAI,CAAC,YAAY,EAAE,CAAC;aAC3B;YACD,MAAM,OAAM,MAAM,WAAE,CAAC;YACrB,OAAO,IAAI,CAAC;QACd,CAAC;KAAA;IAEK,YAAY,CAAC,OAAiC;;YAClD,IAAI,WAA8C,CAAC;YACnD,IAAI,OAAO,EAAE;gBACX,MAAM,iBAAiB,GAAG,oBAAU,CAAC,qBAAqB,CAAC,EAAE,KAAK,EAAE,OAAO,EAAE,CAAC,CAAC;gBAC/E,IAAI,OAAO,iBAAiB,CAAC,KAAK,KAAK,SAAS,EAAE;oBAChD,WAAW,GAAG,iBAAiB,CAAC,KAAK,CAAC;iBACvC;aACF;YACD,MAAM,IAAI,CAAC,OAAO,CAAC,WAAW,CAAC,CAAC;QAClC,CAAC;KAAA;CACF;AAtDD,kCAsDC","sourcesContent":[null]}},"error":null,"hash":"e97ed8fa25c39c410d03552b90377d16","cacheData":{"env":{}}}