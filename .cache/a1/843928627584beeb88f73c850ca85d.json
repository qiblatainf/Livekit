{"id":"node_modules/livekit-client/dist/room/Room.js","dependencies":[{"name":"D:\\Livekit-Client\\node_modules\\livekit-client\\dist\\room\\Room.js.map","includedInParent":true,"mtime":1680887198315},{"name":"D:\\Livekit-Client\\package.json","includedInParent":true,"mtime":1680887270118},{"name":"D:\\Livekit-Client\\node_modules\\livekit-client\\package.json","includedInParent":true,"mtime":1680887189879},{"name":"events","loc":{"line":35,"column":25,"index":1809},"parent":"D:\\Livekit-Client\\node_modules\\livekit-client\\dist\\room\\Room.js","resolved":"D:\\Livekit-Client\\node_modules\\events\\events.js"},{"name":"../logger","loc":{"line":36,"column":41,"index":1861},"parent":"D:\\Livekit-Client\\node_modules\\livekit-client\\dist\\room\\Room.js","resolved":"D:\\Livekit-Client\\node_modules\\livekit-client\\dist\\logger.js"},{"name":"../proto/livekit_models","loc":{"line":37,"column":33,"index":1909},"parent":"D:\\Livekit-Client\\node_modules\\livekit-client\\dist\\room\\Room.js","resolved":"D:\\Livekit-Client\\node_modules\\livekit-client\\dist\\proto\\livekit_models.js"},{"name":"./defaults","loc":{"line":38,"column":27,"index":1964},"parent":"D:\\Livekit-Client\\node_modules\\livekit-client\\dist\\room\\Room.js","resolved":"D:\\Livekit-Client\\node_modules\\livekit-client\\dist\\room\\defaults.js"},{"name":"./DeviceManager","loc":{"line":39,"column":48,"index":2027},"parent":"D:\\Livekit-Client\\node_modules\\livekit-client\\dist\\room\\Room.js","resolved":"D:\\Livekit-Client\\node_modules\\livekit-client\\dist\\room\\DeviceManager.js"},{"name":"./errors","loc":{"line":40,"column":25,"index":2073},"parent":"D:\\Livekit-Client\\node_modules\\livekit-client\\dist\\room\\Room.js","resolved":"D:\\Livekit-Client\\node_modules\\livekit-client\\dist\\room\\errors.js"},{"name":"./events","loc":{"line":41,"column":25,"index":2111},"parent":"D:\\Livekit-Client\\node_modules\\livekit-client\\dist\\room\\Room.js","resolved":"D:\\Livekit-Client\\node_modules\\livekit-client\\dist\\room\\events.js"},{"name":"./participant/LocalParticipant","loc":{"line":42,"column":51,"index":2175},"parent":"D:\\Livekit-Client\\node_modules\\livekit-client\\dist\\room\\Room.js","resolved":"D:\\Livekit-Client\\node_modules\\livekit-client\\dist\\room\\participant\\LocalParticipant.js"},{"name":"./participant/RemoteParticipant","loc":{"line":43,"column":52,"index":2263},"parent":"D:\\Livekit-Client\\node_modules\\livekit-client\\dist\\room\\Room.js","resolved":"D:\\Livekit-Client\\node_modules\\livekit-client\\dist\\room\\participant\\RemoteParticipant.js"},{"name":"./RTCEngine","loc":{"line":44,"column":41,"index":2341},"parent":"D:\\Livekit-Client\\node_modules\\livekit-client\\dist\\room\\Room.js","resolved":"D:\\Livekit-Client\\node_modules\\livekit-client\\dist\\room\\RTCEngine.js"},{"name":"./track/Track","loc":{"line":45,"column":24,"index":2382},"parent":"D:\\Livekit-Client\\node_modules\\livekit-client\\dist\\room\\Room.js","resolved":"D:\\Livekit-Client\\node_modules\\livekit-client\\dist\\room\\track\\Track.js"},{"name":"./utils","loc":{"line":46,"column":24,"index":2424},"parent":"D:\\Livekit-Client\\node_modules\\livekit-client\\dist\\room\\Room.js","resolved":"D:\\Livekit-Client\\node_modules\\livekit-client\\dist\\room\\utils.js"}],"generated":{"js":"\"use strict\";\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    Object.defineProperty(o, k2, { enumerable: true, get: function() { return m[k]; } });\n}) : (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    o[k2] = m[k];\n}));\nvar __setModuleDefault = (this && this.__setModuleDefault) || (Object.create ? (function(o, v) {\n    Object.defineProperty(o, \"default\", { enumerable: true, value: v });\n}) : function(o, v) {\n    o[\"default\"] = v;\n});\nvar __importStar = (this && this.__importStar) || function (mod) {\n    if (mod && mod.__esModule) return mod;\n    var result = {};\n    if (mod != null) for (var k in mod) if (k !== \"default\" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\n    __setModuleDefault(result, mod);\n    return result;\n};\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.RoomState = void 0;\nconst events_1 = require(\"events\");\nconst logger_1 = __importDefault(require(\"../logger\"));\nconst livekit_models_1 = require(\"../proto/livekit_models\");\nconst defaults_1 = require(\"./defaults\");\nconst DeviceManager_1 = __importDefault(require(\"./DeviceManager\"));\nconst errors_1 = require(\"./errors\");\nconst events_2 = require(\"./events\");\nconst LocalParticipant_1 = __importDefault(require(\"./participant/LocalParticipant\"));\nconst RemoteParticipant_1 = __importDefault(require(\"./participant/RemoteParticipant\"));\nconst RTCEngine_1 = __importStar(require(\"./RTCEngine\"));\nconst Track_1 = require(\"./track/Track\");\nconst utils_1 = require(\"./utils\");\nvar RoomState;\n(function (RoomState) {\n    RoomState[\"Disconnected\"] = \"disconnected\";\n    RoomState[\"Connected\"] = \"connected\";\n    RoomState[\"Reconnecting\"] = \"reconnecting\";\n})(RoomState = exports.RoomState || (exports.RoomState = {}));\n/**\n * In LiveKit, a room is the logical grouping for a list of participants.\n * Participants in a room can publish tracks, and subscribe to others' tracks.\n *\n * a Room fires [[RoomEvent | RoomEvents]].\n *\n * @noInheritDoc\n */\nclass Room extends events_1.EventEmitter {\n    /** @internal */\n    constructor(client, options) {\n        super();\n        this.state = RoomState.Disconnected;\n        /**\n         * list of participants that are actively speaking. when this changes\n         * a [[RoomEvent.ActiveSpeakersChanged]] event is fired\n         */\n        this.activeSpeakers = [];\n        /** room metadata */\n        this.metadata = undefined;\n        /** @internal */\n        this.options = {};\n        this.audioEnabled = true;\n        /** @internal */\n        this.connect = (url, token, opts) => __awaiter(this, void 0, void 0, function* () {\n            // guard against calling connect\n            if (this.localParticipant) {\n                logger_1.default.warn('already connected to room', this.name);\n                return this;\n            }\n            try {\n                const joinResponse = yield this.engine.join(url, token, opts);\n                logger_1.default.debug('connected to Livekit Server', joinResponse.serverVersion);\n                if (!joinResponse.serverVersion) {\n                    throw new errors_1.UnsupportedServer('unknown server version');\n                }\n                this.state = RoomState.Connected;\n                const pi = joinResponse.participant;\n                this.localParticipant = new LocalParticipant_1.default(pi.sid, pi.identity, this.engine);\n                this.localParticipant.updateInfo(pi);\n                // forward metadata changed for the local participant\n                this.localParticipant\n                    .on(events_2.ParticipantEvent.MetadataChanged, (metadata, p) => {\n                    this.emit(events_2.RoomEvent.MetadataChanged, metadata, p);\n                })\n                    .on(events_2.ParticipantEvent.ParticipantMetadataChanged, (metadata, p) => {\n                    this.emit(events_2.RoomEvent.ParticipantMetadataChanged, metadata, p);\n                })\n                    .on(events_2.ParticipantEvent.TrackMuted, (pub) => {\n                    this.emit(events_2.RoomEvent.TrackMuted, pub, this.localParticipant);\n                })\n                    .on(events_2.ParticipantEvent.TrackUnmuted, (pub) => {\n                    this.emit(events_2.RoomEvent.TrackUnmuted, pub, this.localParticipant);\n                })\n                    .on(events_2.ParticipantEvent.LocalTrackPublished, (pub) => {\n                    this.emit(events_2.RoomEvent.LocalTrackPublished, pub, this.localParticipant);\n                })\n                    .on(events_2.ParticipantEvent.LocalTrackUnpublished, (pub) => {\n                    this.emit(events_2.RoomEvent.LocalTrackUnpublished, pub, this.localParticipant);\n                })\n                    .on(events_2.ParticipantEvent.ConnectionQualityChanged, (quality) => {\n                    this.emit(events_2.RoomEvent.ConnectionQualityChanged, quality, this.localParticipant);\n                })\n                    .on(events_2.ParticipantEvent.MediaDevicesError, (e) => {\n                    this.emit(events_2.RoomEvent.MediaDevicesError, e);\n                });\n                // populate remote participants, these should not trigger new events\n                joinResponse.otherParticipants.forEach((info) => {\n                    this.getOrCreateParticipant(info.sid, info);\n                });\n                this.name = joinResponse.room.name;\n                this.sid = joinResponse.room.sid;\n            }\n            catch (err) {\n                this.engine.close();\n                throw err;\n            }\n            // don't return until ICE connected\n            return new Promise((resolve, reject) => {\n                const connectTimeout = setTimeout(() => {\n                    // timeout\n                    this.engine.close();\n                    reject(new errors_1.ConnectionError('could not connect after timeout'));\n                }, RTCEngine_1.maxICEConnectTimeout);\n                this.engine.once(events_2.EngineEvent.Connected, () => {\n                    clearTimeout(connectTimeout);\n                    // also hook unload event\n                    window.addEventListener('beforeunload', this.onBeforeUnload);\n                    navigator.mediaDevices.addEventListener('devicechange', this.handleDeviceChange);\n                    resolve(this);\n                });\n            });\n        });\n        /**\n         * disconnects the room, emits [[RoomEvent.Disconnected]]\n         */\n        this.disconnect = (stopTracks = true) => {\n            // send leave\n            this.engine.client.sendLeave();\n            this.engine.close();\n            this.handleDisconnect(stopTracks);\n        };\n        this.onBeforeUnload = () => {\n            this.disconnect();\n        };\n        // updates are sent only when there's a change to speaker ordering\n        this.handleActiveSpeakersUpdate = (speakers) => {\n            const activeSpeakers = [];\n            const seenSids = {};\n            speakers.forEach((speaker) => {\n                seenSids[speaker.sid] = true;\n                if (speaker.sid === this.localParticipant.sid) {\n                    this.localParticipant.audioLevel = speaker.level;\n                    this.localParticipant.setIsSpeaking(true);\n                    activeSpeakers.push(this.localParticipant);\n                }\n                else {\n                    const p = this.participants.get(speaker.sid);\n                    if (p) {\n                        p.audioLevel = speaker.level;\n                        p.setIsSpeaking(true);\n                        activeSpeakers.push(p);\n                    }\n                }\n            });\n            if (!seenSids[this.localParticipant.sid]) {\n                this.localParticipant.audioLevel = 0;\n                this.localParticipant.setIsSpeaking(false);\n            }\n            this.participants.forEach((p) => {\n                if (!seenSids[p.sid]) {\n                    p.audioLevel = 0;\n                    p.setIsSpeaking(false);\n                }\n            });\n            this.activeSpeakers = activeSpeakers;\n            this.emit(events_2.RoomEvent.ActiveSpeakersChanged, activeSpeakers);\n        };\n        // process list of changed speakers\n        this.handleSpeakersChanged = (speakerUpdates) => {\n            const lastSpeakers = new Map();\n            this.activeSpeakers.forEach((p) => {\n                lastSpeakers.set(p.sid, p);\n            });\n            speakerUpdates.forEach((speaker) => {\n                let p = this.participants.get(speaker.sid);\n                if (speaker.sid === this.localParticipant.sid) {\n                    p = this.localParticipant;\n                }\n                if (!p) {\n                    return;\n                }\n                p.audioLevel = speaker.level;\n                p.setIsSpeaking(speaker.active);\n                if (speaker.active) {\n                    lastSpeakers.set(speaker.sid, p);\n                }\n                else {\n                    lastSpeakers.delete(speaker.sid);\n                }\n            });\n            const activeSpeakers = Array.from(lastSpeakers.values());\n            activeSpeakers.sort((a, b) => b.audioLevel - a.audioLevel);\n            this.activeSpeakers = activeSpeakers;\n            this.emit(events_2.RoomEvent.ActiveSpeakersChanged, activeSpeakers);\n        };\n        this.handleDataPacket = (userPacket, kind) => {\n            // find the participant\n            const participant = this.participants.get(userPacket.participantSid);\n            this.emit(events_2.RoomEvent.DataReceived, userPacket.payload, participant, kind);\n            // also emit on the participant\n            participant === null || participant === void 0 ? void 0 : participant.emit(events_2.ParticipantEvent.DataReceived, userPacket.payload, kind);\n        };\n        this.handleAudioPlaybackStarted = () => {\n            if (this.canPlaybackAudio) {\n                return;\n            }\n            this.audioEnabled = true;\n            this.emit(events_2.RoomEvent.AudioPlaybackStatusChanged, true);\n        };\n        this.handleAudioPlaybackFailed = (e) => {\n            logger_1.default.warn('could not playback audio', e);\n            if (!this.canPlaybackAudio) {\n                return;\n            }\n            this.audioEnabled = false;\n            this.emit(events_2.RoomEvent.AudioPlaybackStatusChanged, false);\n        };\n        this.handleDeviceChange = () => __awaiter(this, void 0, void 0, function* () {\n            this.emit(events_2.RoomEvent.MediaDevicesChanged);\n        });\n        this.handleRoomUpdate = (r) => {\n            this.metadata = r.metadata;\n            this.emit(events_2.RoomEvent.RoomMetadataChanged, r.metadata);\n        };\n        this.handleConnectionQualityUpdate = (update) => {\n            update.updates.forEach((info) => {\n                if (info.participantSid === this.localParticipant.sid) {\n                    this.localParticipant.setConnectionQuality(info.quality);\n                    return;\n                }\n                const participant = this.participants.get(info.participantSid);\n                if (participant) {\n                    participant.setConnectionQuality(info.quality);\n                }\n            });\n        };\n        this.participants = new Map();\n        this.options = options || {};\n        this.engine = new RTCEngine_1.default(client, this.options.rtcConfig);\n        this.acquireAudioContext();\n        this.engine.on(events_2.EngineEvent.MediaTrackAdded, (mediaTrack, stream, receiver) => {\n            this.onTrackAdded(mediaTrack, stream, receiver);\n        });\n        this.engine.on(events_2.EngineEvent.Disconnected, () => {\n            this.handleDisconnect();\n        });\n        this.engine.on(events_2.EngineEvent.ParticipantUpdate, (participants) => {\n            this.handleParticipantUpdates(participants);\n        });\n        this.engine.on(events_2.EngineEvent.RoomUpdate, this.handleRoomUpdate);\n        this.engine.on(events_2.EngineEvent.ActiveSpeakersUpdate, this.handleActiveSpeakersUpdate);\n        this.engine.on(events_2.EngineEvent.SpeakersChanged, this.handleSpeakersChanged);\n        this.engine.on(events_2.EngineEvent.DataPacketReceived, this.handleDataPacket);\n        this.engine.on(events_2.EngineEvent.Reconnecting, () => {\n            this.state = RoomState.Reconnecting;\n            this.emit(events_2.RoomEvent.Reconnecting);\n        });\n        this.engine.on(events_2.EngineEvent.Reconnected, () => {\n            this.state = RoomState.Connected;\n            this.emit(events_2.RoomEvent.Reconnected);\n        });\n        this.engine.on(events_2.EngineEvent.ConnectionQualityUpdate, this.handleConnectionQualityUpdate);\n    }\n    /**\n     * getLocalDevices abstracts navigator.mediaDevices.enumerateDevices.\n     * In particular, it handles Chrome's unique behavior of creating `default`\n     * devices. When encountered, it'll be removed from the list of devices.\n     * The actual default device will be placed at top.\n     * @param kind\n     * @returns a list of available local devices\n     */\n    static getLocalDevices(kind) {\n        return DeviceManager_1.default.getInstance().getDevices(kind);\n    }\n    /**\n     * Set default publish options\n     */\n    set defaultPublishOptions(opts) {\n        defaults_1.setTrackPublishDefaults(opts);\n    }\n    get defaultPublishOptions() {\n        return defaults_1.getTrackPublishDefaults();\n    }\n    set defaultCaptureOptions(opts) {\n        defaults_1.setTrackCaptureDefaults(opts);\n    }\n    get defaultCaptureOptions() {\n        return defaults_1.getTrackCaptureDefaults();\n    }\n    /**\n     * Browsers have different policies regarding audio playback. Most requiring\n     * some form of user interaction (click/tap/etc).\n     * In those cases, audio will be silent until a click/tap triggering one of the following\n     * - `startAudio`\n     * - `getUserMedia`\n     */\n    startAudio() {\n        return __awaiter(this, void 0, void 0, function* () {\n            this.acquireAudioContext();\n            const elements = [];\n            this.participants.forEach((p) => {\n                p.audioTracks.forEach((t) => {\n                    if (t.track) {\n                        t.track.attachedElements.forEach((e) => {\n                            elements.push(e);\n                        });\n                    }\n                });\n            });\n            try {\n                yield Promise.all(elements.map((e) => e.play()));\n                this.handleAudioPlaybackStarted();\n            }\n            catch (err) {\n                this.handleAudioPlaybackFailed(err);\n                throw err;\n            }\n        });\n    }\n    /**\n     * Returns true if audio playback is enabled\n     */\n    get canPlaybackAudio() {\n        return this.audioEnabled;\n    }\n    /**\n     * Switches all active device used in this room to the given device.\n     *\n     * Note: setting AudioOutput is not supported on some browsers. See [setSinkId](https://developer.mozilla.org/en-US/docs/Web/API/HTMLMediaElement/setSinkId#browser_compatibility)\n     *\n     * @param kind use `videoinput` for camera track,\n     *  `audioinput` for microphone track,\n     *  `audiooutput` to set speaker for all incoming audio tracks\n     * @param deviceId\n     */\n    switchActiveDevice(kind, deviceId) {\n        return __awaiter(this, void 0, void 0, function* () {\n            if (kind === 'audioinput') {\n                const tracks = Array\n                    .from(this.localParticipant.audioTracks.values())\n                    .filter((track) => track.source === Track_1.Track.Source.Microphone);\n                yield Promise.all(tracks.map((t) => { var _a; return (_a = t.audioTrack) === null || _a === void 0 ? void 0 : _a.setDeviceId(deviceId); }));\n                this.defaultCaptureOptions.audioDeviceId = deviceId;\n            }\n            else if (kind === 'videoinput') {\n                const tracks = Array\n                    .from(this.localParticipant.videoTracks.values())\n                    .filter((track) => track.source === Track_1.Track.Source.Camera);\n                yield Promise.all(tracks.map((t) => { var _a; return (_a = t.videoTrack) === null || _a === void 0 ? void 0 : _a.setDeviceId(deviceId); }));\n                this.defaultCaptureOptions.videoDeviceId = deviceId;\n            }\n            else if (kind === 'audiooutput') {\n                const elements = [];\n                this.participants.forEach((p) => {\n                    p.audioTracks.forEach((t) => {\n                        if (t.isSubscribed && t.track) {\n                            t.track.attachedElements.forEach((e) => {\n                                elements.push(e);\n                            });\n                        }\n                    });\n                });\n                yield Promise.all(elements.map((e) => __awaiter(this, void 0, void 0, function* () {\n                    if ('setSinkId' in e) {\n                        /* @ts-ignore */\n                        yield e.setSinkId(deviceId);\n                    }\n                })));\n            }\n        });\n    }\n    onTrackAdded(mediaTrack, stream, receiver) {\n        const parts = utils_1.unpackStreamId(stream.id);\n        const participantId = parts[0];\n        let trackId = parts[1];\n        if (!trackId || trackId === '')\n            trackId = mediaTrack.id;\n        const participant = this.getOrCreateParticipant(participantId);\n        participant.addSubscribedMediaTrack(mediaTrack, trackId, receiver, this.options.autoManageVideo);\n    }\n    handleDisconnect(shouldStopTracks = true) {\n        if (this.state === RoomState.Disconnected) {\n            return;\n        }\n        this.participants.forEach((p) => {\n            p.tracks.forEach((pub) => {\n                p.unpublishTrack(pub.trackSid);\n            });\n        });\n        if (shouldStopTracks) {\n            this.localParticipant.tracks.forEach((pub) => {\n                var _a, _b;\n                (_a = pub.track) === null || _a === void 0 ? void 0 : _a.detach();\n                (_b = pub.track) === null || _b === void 0 ? void 0 : _b.stop();\n            });\n        }\n        this.participants.clear();\n        this.activeSpeakers = [];\n        if (this.audioContext) {\n            this.audioContext.close();\n            this.audioContext = undefined;\n        }\n        window.removeEventListener('beforeunload', this.onBeforeUnload);\n        navigator.mediaDevices.removeEventListener('devicechange', this.handleDeviceChange);\n        this.emit(events_2.RoomEvent.Disconnected);\n        this.state = RoomState.Disconnected;\n    }\n    handleParticipantUpdates(participantInfos) {\n        // handle changes to participant state, and send events\n        participantInfos.forEach((info) => {\n            if (info.sid === this.localParticipant.sid) {\n                this.localParticipant.updateInfo(info);\n                return;\n            }\n            let remoteParticipant = this.participants.get(info.sid);\n            const isNewParticipant = !remoteParticipant;\n            // create participant if doesn't exist\n            remoteParticipant = this.getOrCreateParticipant(info.sid, info);\n            // when it's disconnected, send updates\n            if (info.state === livekit_models_1.ParticipantInfo_State.DISCONNECTED) {\n                this.handleParticipantDisconnected(info.sid, remoteParticipant);\n            }\n            else if (isNewParticipant) {\n                // fire connected event\n                this.emit(events_2.RoomEvent.ParticipantConnected, remoteParticipant);\n            }\n            else {\n                // just update, no events\n                remoteParticipant.updateInfo(info);\n            }\n        });\n    }\n    handleParticipantDisconnected(sid, participant) {\n        // remove and send event\n        this.participants.delete(sid);\n        if (!participant) {\n            return;\n        }\n        participant.tracks.forEach((publication) => {\n            participant.unpublishTrack(publication.trackSid);\n        });\n        this.emit(events_2.RoomEvent.ParticipantDisconnected, participant);\n    }\n    acquireAudioContext() {\n        if (this.audioContext) {\n            this.audioContext.close();\n        }\n        // by using an AudioContext, it reduces lag on audio elements\n        // https://stackoverflow.com/questions/9811429/html5-audio-tag-on-safari-has-a-delay/54119854#54119854\n        // @ts-ignore\n        const AudioContext = window.AudioContext || window.webkitAudioContext;\n        if (AudioContext) {\n            this.audioContext = new AudioContext();\n        }\n    }\n    getOrCreateParticipant(id, info) {\n        let participant = this.participants.get(id);\n        if (!participant) {\n            // it's possible for the RTC track to arrive before signaling data\n            // when this happens, we'll create the participant and make the track work\n            if (info) {\n                participant = RemoteParticipant_1.default.fromParticipantInfo(this.engine.client, info);\n            }\n            else {\n                participant = new RemoteParticipant_1.default(this.engine.client, id, '');\n            }\n            this.participants.set(id, participant);\n            // also forward events\n            // trackPublished is only fired for tracks added after both local participant\n            // and remote participant joined the room\n            participant\n                .on(events_2.ParticipantEvent.TrackPublished, (trackPublication) => {\n                this.emit(events_2.RoomEvent.TrackPublished, trackPublication, participant);\n            })\n                .on(events_2.ParticipantEvent.TrackSubscribed, (track, publication) => {\n                // monitor playback status\n                if (track.kind === Track_1.Track.Kind.Audio) {\n                    track.on(events_2.TrackEvent.AudioPlaybackStarted, this.handleAudioPlaybackStarted);\n                    track.on(events_2.TrackEvent.AudioPlaybackFailed, this.handleAudioPlaybackFailed);\n                }\n                this.emit(events_2.RoomEvent.TrackSubscribed, track, publication, participant);\n            })\n                .on(events_2.ParticipantEvent.TrackUnpublished, (publication) => {\n                this.emit(events_2.RoomEvent.TrackUnpublished, publication, participant);\n            })\n                .on(events_2.ParticipantEvent.TrackUnsubscribed, (track, publication) => {\n                this.emit(events_2.RoomEvent.TrackUnsubscribed, track, publication, participant);\n            })\n                .on(events_2.ParticipantEvent.TrackSubscriptionFailed, (sid) => {\n                this.emit(events_2.RoomEvent.TrackSubscriptionFailed, sid, participant);\n            })\n                .on(events_2.ParticipantEvent.TrackMuted, (pub) => {\n                this.emit(events_2.RoomEvent.TrackMuted, pub, participant);\n            })\n                .on(events_2.ParticipantEvent.TrackUnmuted, (pub) => {\n                this.emit(events_2.RoomEvent.TrackUnmuted, pub, participant);\n            })\n                .on(events_2.ParticipantEvent.MetadataChanged, (metadata, p) => {\n                this.emit(events_2.RoomEvent.ParticipantMetadataChanged, metadata, p);\n                this.emit(events_2.RoomEvent.MetadataChanged, metadata, p);\n            })\n                .on(events_2.ParticipantEvent.ConnectionQualityChanged, (quality) => {\n                this.emit(events_2.RoomEvent.ConnectionQualityChanged, quality, participant);\n            });\n        }\n        return participant;\n    }\n    /** @internal */\n    emit(event, ...args) {\n        logger_1.default.debug('room event', event, ...args);\n        return super.emit(event, ...args);\n    }\n}\nexports.default = Room;\n"},"sourceMaps":{"js":{"version":3,"file":"Room.js","sourceRoot":"","sources":["../../src/room/Room.ts"],"names":[],"mappings":"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","sourcesContent":[null]}},"error":null,"hash":"1a208b92ae2e31104d6a14ac4c53e7fc","cacheData":{"env":{}}}